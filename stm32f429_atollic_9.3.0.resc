:name: STM32F429
:description: This script runs usart3 retarget on STM32F429

using sysbus
logFile @/Users/jhg/Documents/Work2022/test1/function-trace.log

$name?="STM32F429"
mach create $name

machine LoadPlatformDescription "platforms/cpus/stm32f429.repl"
machine StartGdbServer 3333 true

showAnalyzer usart3

$bin ?= "/Users/jhg/Documents/Work2022/test1/test1.elf"

macro reset
"""
    sysbus.cpu LogFunctionNames True
	logLevel -1
	sysbus LoadELF $bin
"""

runMacro $reset

